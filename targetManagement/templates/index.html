{% load static %}
<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Target - {{request.resolver_match.url_name}}</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="shortcut icon" type="image/x-icon" href="{% static 'img/logo/logo.png' %}">
        <!-- Place favicon.ico in the root directory -->

		<!-- CSS here -->
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/animate.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
        <link rel="stylesheet" href="{% static 'css/fontawesome-all.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/jquery-ui.css' %}">
        <link rel="stylesheet" href="{% static 'css/flaticon.css' %}">
        <link rel="stylesheet" href="{% static 'css/aos.css' %}">
        <link rel="stylesheet" href="{% static 'css/slick.css' %}">
        <link rel="stylesheet" href="{% static 'css/default.css' %}">
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
        <link rel="stylesheet" href="{% static 'css/test.css' %}">
        <link rel="stylesheet" href="{% static 'css/catalog.css' %}">
        <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    </head>
    <body>

        <!-- preloader -->
        <div id="preloader">
            <div id="loading-center">
                <div class="loader">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>

        <!-- preloader-end -->

		<!-- Scroll-top -->
        <button class="scroll-top scroll-to-target" data-target="html">
            <i class="fas fa-angle-up"></i>
        </button>
        <!-- Scroll-top-end-->

        <!-- header-area -->
        <header>
            <!-- header-top-start -->
            <div class="header-top-wrap">
                <div class="container custom-container">
                    <div class="row align-items-center">
                        <div class="col-md-7">
                            <div class="header-top-left">
                                <div class="header-search-wrap">
                                    <form action="#">
                                        <select class="custom-select">
                                            <option selected="">All Categories</option>
                                            {% for cat in categories %}
                                                <option value="cat.id">{{cat.name}}</option>
                                            {% endfor %}
                                        </select>
                                        <input type="text" placeholder="Search Product...">
                                        <button><i class="flaticon-loupe-1"></i></button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="header-top-right">
                                <ul>
                                    <li class="header-wishlist"><a href="#">
                                            Orders
                                            <span class="item-count" style="margin-right:5px;margin-top:-10px">0</span>
                                    </a></li>
                                    <li class="header-wishlist"><a href="#">
                                        Customer Feedback
                                        <span class="item-count" style="margin-right:5px;margin-top:-10px">0</span>
                                    </a></li>
                                    <li><a href="{% url 'logout'%}">Log Out</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- header-top-end -->


            <div id="sticky-header" class="menu-area">
                <div class="container custom-container">
                    <div class="row">
                        <div class="col-12">
                            <div class="mobile-nav-toggler"><i class="fas fa-bars"></i></div>
                            <div class="menu-wrap">
                                <nav class="menu-nav">
                                    <div class="logo d-block d-lg-none">
                                        <a href="index.html"><img src="img/logo/logo.png" alt=""></a>
                                    </div>
                                    <div class="header-category d-none d-lg-block">
                                        <a href="#" class="cat-toggle"><i class="fas fa-bars"></i>ALL DEPARTMENT<i class="fas fa-angle-down"></i></a>
                                        <ul class="category-menu">
                                            <li class="menu-item-has-children"><a href="shop.html"><i class="flaticon-groceries"></i> Dept One</a>
                                                <ul class="megamenu">
                                                    <li class="sub-column-item"><a href="shop.html">Sub Dept One</a>
                                                        <ul>
                                                            <li><a href="shop.html">Product category One</a></li>
                                                        </ul>
                                                    </li>
                                                    <li class="sub-column-item"><a href="shop.html">Sub Dept Two</a>
                                                        <ul>
                                                            <li><a href="shop.html">Product category One</a></li>
                                                        </ul>
                                                    </li>
                                                    {% comment %} <li class="sub-column-item"><a href="shop.html">Dept Banner</a>
                                                        <ul>
                                                            <li class="mega-menu-banner"><a href="shop.html"><img src="{% static 'img/images/megamenu_banner.jpg' %}" alt=""></a></li>
                                                        </ul>
                                                    </li> {% endcomment %}
                                                </ul>
                                            </li>
                                            <li><a href="shop.html"><i class="flaticon-cherry"></i> Dept Two</a></li>
                                        </ul>
                                    </div>
                                    <div class="navbar-wrap main-menu d-none d-lg-flex">
                                        <ul class="navigation">
                                            <li class="{% if request.resolver_match.url_name == "index" %}active{% endif %}"><a href="{% url 'index'%}" >Catalog</a></li>
                                            <li class="{% if request.resolver_match.url_name == "seasons" %}active{% endif %}"><a href="{% url 'seasons'%}" >Seasons</a></li>
                                            <li class="{% if request.resolver_match.url_name == "banners" %}active{% endif %}"><a href="{% url 'banners'%}" >Banners</a></li>
                                            <li class="{% if request.resolver_match.url_name == "reports" %}active{% endif %}"><a href="{% url 'reports'%}" >Reports</a></li>
                                            {% comment %} <li class="menu-item-has-children"><a href="#">Home</a>
                                                <ul class="submenu">
                                                    <li><a href="index.html">Home Page One</a></li>
                                                    <li><a href="index-2.html">Home Page Two</a></li>
                                                </ul>
                                            </li>
                                            <li><a href="about-us.html">About Us</a></li>
                                            <li><a href="shop.html">Fruits & Vegetables</a></li>
                                            <li><a href="shop-right-sidebar.html">Grocery & Staples</a></li>
                                            <li class="active menu-item-has-children"><a href="#">Pages</a>
                                                <ul class="submenu">
                                                    <li><a href="shop-details.html">Shop Details</a></li>
                                                    <li class="active"><a href="cart.html">cart Page</a></li>
                                                    <li><a href="checkout.html">Checkout page</a></li>
                                                    <li><a href="blog.html">Our Blog</a></li>
                                                    <li><a href="blog-details.html">Blog Details</a></li>
                                                    <li><a href="404.html">404 Page</a></li>
                                                    <li><a href="terms-conditios.html">Terms Conditions</a></li>
                                                </ul>
                                            </li>
                                            <li><a href="contact.html">contacts</a></li> {% endcomment %}
                                        </ul>
                                    </div>
                                    <div class="header-super-store d-none d-xl-block d-lg-none d-md-block">
                                        <div class="dropdown">
                                            <button class="dropdown-toggle" type="button" id="dropdownMenuButton4" data-toggle="dropdown" aria-haspopup="true"
                                                aria-expanded="false"><i class="flaticon-shop"></i> Upload a file</button>
                                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton4">
                                                <a class="dropdown-item" type="button" data-toggle="modal" data-target="#file_upload">CSV file</a>
                                                <a id="create-product" class="dropdown-item" type="button">Add A Product</a>
                                            </div>
                                        </div>

                                    </div>
                                </nav>
                            </div>
                            <!-- Mobile Menu  -->
                            <div class="mobile-menu">
                                <nav class="menu-box">
                                    <div class="close-btn"><i class="fas fa-times"></i></div>
                                    <div class="nav-logo"><a href="index.html"><img src="{% static 'img/logo/logo.png' %}" alt="" title=""></a>
                                    </div>
                                    <div class="menu-outer">
                                        <!--Here Menu Will Come Automatically Via Javascript / Same Menu as in Header-->
                                    </div>
                                    <div class="social-links">
                                        <ul class="clearfix">
                                            <li><a href="#"><span class="fab fa-twitter"></span></a></li>
                                            <li><a href="#"><span class="fab fa-facebook-f"></span></a></li>
                                            <li><a href="#"><span class="fab fa-pinterest-p"></span></a></li>
                                            <li><a href="#"><span class="fab fa-instagram"></span></a></li>
                                            <li><a href="#"><span class="fab fa-youtube"></span></a></li>
                                        </ul>
                                    </div>
                                </nav>
                            </div>
                            <div class="menu-backdrop"></div>
                            <!-- End Mobile Menu -->
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- header-area-end -->


        <!-- main-area -->
        <main>

            {% block content %}{% endblock %}

        </main>
        <!-- main-area-end -->

        <div class = "modal fade" id="file_upload" tabindex="-1" role="dialog" aria-labelledby="file_uploadTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content rounded-0">
                    <div class="modal-body bg-4">
                        <form action="{% url 'uploadcsv' %}" method="post" enctype="multipart/form-data" class="pt-3">
                            {% csrf_token %}
                            {{csvform}}
                            <div class="pt-3"></div>
                            <button type="submit">Confirm</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class = "modal fade" id="update_prod" tabindex="-1" role="dialog" aria-labelledby="update_prodTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content rounded-0">
                    <div class="modal-body bg-4">
                        <div >
                            <div class="shop-cart-total" style="margin:0;">
                                <h3 class="title">Add a Product</h3>
                                <div class="shop-cart-widget product-input">
                                    <form action="{% url 'newItem'%}" method="POST" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        <ul>
                                            <li class="cart-total-amount"><span>Name</span>{{ form.name }}</li>
<!--                                            <li class="cart-total-amount"><span>Description</span>{{ form.description }} </li>-->
                                            <li class="cart-total-amount"><span>Tag</span>{{ form.tag }} </li>
                                            <li class="cart-total-amount"><span>Price</span>{{ form.price }}</li>
                                            <li class="cart-total-amount"><span>Unit</span>{{ form.unit }}</li>
                                            <li class="cart-total-amount"><span>Category</span>{{ form.category }}</li>
                                            <li class="cart-total-amount"><span>Image</span>{{ form.image }}</li>
                                        </ul>
                                        <button type="submit" class="btn" >Add</button>
                                    </form>
                                    {% for message in messages %}
                                        <p>{{message}}</p>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" tabindex="-1" role="dialog" id="modal">
            <div class="modal-dialog" role="document">
                <div class="modal-content"></div>
            </div>
        </div>

		<!-- JS here -->
        <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
        <script src="{% static 'js/popper.min.js' %}"></script>
        <script data-cfasync="false" src="{% static '/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js' %}"></script><script src="{% static 'js/vendor/jquery-3.6.0.min.js' %}"></script>
        <script src="{% static 'js/bootstrap.min.js' %}"></script>
        <script src="{% static 'js/isotope.pkgd.min.js' %}"></script>
        <script src="{% static 'js/imagesloaded.pkgd.min.js' %}"></script>

        <script src="{% static 'js/slick.min.js' %}"></script>
        <script src="{% static 'js/ajax-form.js' %}"></script>
        <script src="{% static 'js/wow.min.js' %}"></script>
        <script src="{% static 'js/aos.js' %}"></script>
        <script src="{% static 'js/plugins.js' %}"></script>
        <script src="{% static 'js/main.js' %}"></script>
        <script src="{% static 'js/jquery.bootstrap.modal.forms.min.js' %}"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("#create-product").modalForm({
                formURL: "{% url 'create_book' %}"
            });

                  // Update book asynchronous button
      // message
      var asyncSuccessMessageUpdate = [
        "<div ",
        "style='position:fixed;top:0;z-index:10000;width:100%;border-radius:0;' ",
        "class='alert alert-icon alert-success alert-dismissible fade show mb-0' role='alert'>",
        "Success: Product was updated.",
        "<button type='button' class='close' data-dismiss='alert' aria-label='Close'>",
        "<span aria-hidden='true'>&times;</span>",
        "</button>",
        "</div>",
        "<script>",
        "$('.alert').fadeTo(2000, 500).slideUp(500, function () {$('.alert').slideUp(500).remove();});",
        "<\/script>"
      ].join("");

      // modal form
      function updateBookModalForm() {
        $(".update-product").each(function () {
          $(this).modalForm({
            formURL: $(this).data("form-url"),
            asyncUpdate: false,
            asyncSettings: {
              closeOnSubmit: true,
              successMessage: asyncSuccessMessageUpdate,
              dataUrl: $(this).data("data-url"),
              dataElementId: "#products-table",
              dataKey: "section",
              addModalFormFunction: reinstantiateModalForms
            }
          });
        });
      }
      updateBookModalForm();


      function reinstantiateModalForms() {
        updateBookModalForm();
      }
        });
    </script>
    </body>
</html>